{% extends "base.html" %}

{% block content %}
<div class="panel-header panel-header-lg">
  <div style="margin-left: 2rem;margin-right: 2rem;color:#fff;">
    <h1>Welcome to our DBL Visualization!</h1>
     {% for message in messages %}
      {% if message %}
      {% autoescape off %}
      <div class="alert alert-danger">
        <strong>Ooops!</strong> {{message}}
      </div>
      {% endautoescape %}
      {% endif %}
    {% endfor %}
    <p>
      Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas eu turpis varius, pretium mi vel, posuere nisi. Vestibulum
      rhoncus sagittis risus et pulvinar. Quisque pharetra eleifend lacus vitae mollis. Curabitur dui leo, vulputate et dui
      id, tincidunt facilisis risus. Proin dolor diam, vulputate sit amet purus in, pharetra dictum sapien. Pellentesque
      commodo orci et vulputate egestas. Ut condimentum placerat risus, non pulvinar eros aliquet a. Praesent sed porta justo.
      Vestibulum volutpat convallis nisl, id consectetur neque mattis eu. Integer ultrices, nisi vitae interdum bibendum,
      erat nisi condimentum justo, et scelerisque augue turpis nec augue. Suspendisse vitae diam neque. Proin metus urna,
      accumsan ut tempor et, tincidunt ut enim. Cras vitae nibh et augue fringilla hendrerit nec at nisi. Duis sit amet imperdiet
      magna, ut varius neque. Suspendisse maximus nec orci vel semper. Praesent pulvinar pretium eros vel pretium. Integer
      dignissim condimentum fermentum. In hac habitasse platea dictumst. Morbi scelerisque consectetur luctus. Suspendisse
      potenti. Integer et varius augue. Duis nec nibh maximus, rutrum odio id, auctor nibh. Nulla est est, facilisis sit
      amet tellus sed, lacinia ultrices nunc. In consectetur ut diam nec finibus. Quisque ultricies quam sed est dignissim
      hendrerit. Nullam ante sem, congue nec odio semper, laoreet condimentum lorem.
    </p>
  </div>
</div>
<div class="content">
  <div class="row">
    <div class="col-lg-4">
      <div class="card card-chart" style="height:350px;">
        <div class="card-header">
          <h5 class="card-category">Upload a new dataset</h5>
          <h4 class="card-title"> Upload Dataset</h4>
        </div>
        <div class="card-body">
          <form action="/upload/" method="post" class="form-horizontal" enctype="multipart/form-data">
              {% csrf_token %}
              <div class="form-group">
                            <div class="col-sm-offset-2 col-sm-10">
                                <span class="text-danger small"></span>
                            </div>
                        </div>

                        <div class="form-group">
                            <div class="col-sm-offset-2 col-sm-10">
                                <span class="text-danger small"></span>
                            </div>
                        </div>
                        <div class="form-group">
                                <label>Data name</label>
                                <input type="text" class="form-control" name="dataname" maxlength="250" required="" id="id_dataname">
                            </div>
                            <div class="form-group">
                                    <label>Datafile</label>
                        <div class="input-group no-border">
                          <label class="form-control">
                          <label for="id_file_path" id="upload-file-info">Select file...</label> <input type="file" name="file_path" required="" id="id_file_path" hidden onchange="$('#upload-file-info').html(this.files[0].name)"></input>
                          </label>
                          <div class="input-group-append">
                                <div class="input-group-text">
                                    <i class="now-ui-icons files_paper"></i>
                                </div>
                            </div>
                        </div>
                    </div>

                        <div class="form-group pull-right">
                            <div class="col-sm-offset-2">
                                <button type="submit" class="btn btn-primary">Submit</button>
                            </div>
                        </div>
          </form>
        </div>
        <!-- <div class="card-footer">

        </div> -->
      </div>
    </div>
    <div class="col-lg-8 col-md-6">
      <div class="card card-chart" style="height:350px;">
        <div class="card-header">
          <h5 class="card-category">Previously uploaded datasets</h5>
          <h4 class="card-title"> Previous Datasets</h4>
        </div>
        <div class="card-body">
          <div class="table-responsive" style="height:250px;">
            <table class="table">
              <thead class=" text-primary">
                <tr>
                <th>#</th>
                <th>Dataname</th>
                <th>Filepath</th>
                <th>Uploaded at</th>
              </tr>
              </thead>
              <tbody>
                {% for data in latest_uploads %}
                <tr>
                  <th scope="row">{{data.id}}</th>
                  <td>
                    <a href="/display/{{data.id}}">{{data.dataname}}</a>
                  </td>
                  <td>/uploads/{{data.file_path}}</td>
                  <td>{{data.created_at}}</td>
                </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
        </div>
        <div class="card-footer">

        </div>
      </div>
    </div>
  </div>

</div>
</div>
{% endblock content %}
